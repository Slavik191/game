!function(e){var t={};function r(n){if(t[n])return t[n].exports;var a=t[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)r.d(n,a,function(t){return e[t]}.bind(null,a));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=1)}([function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=function(e){return e&&e.__esModule?e:{default:e}}(r(4));var i=function(){function e(t,r,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.store=new a.default(t),this.fieldSize=t,this.numberStorage=r,this.maxNumberBoxStorage=n,this.numberBoxMap=0}return n(e,[{key:"createField",value:function(){for(var e=this,t=[],r=function(r){var a=!0,i=Math.floor(Math.random()*e.fieldSize),o=Math.floor(Math.random()*e.fieldSize);t.forEach(function(e){e[0]===i&&e[1]===o&&(a=!1)}),a?t.push([i,o]):r--,n=r},n=0;n<this.numberStorage;n++)r(n);var a=document.createElement("table");a.id="field";var i=function(r){for(var n=document.createElement("tr"),i=function(a){var i=document.createElement("td");i.id=""+r+a,t.forEach(function(t){if(t[0]===r&&t[1]===a){i.className="black";var n=Math.floor(Math.random()*+e.maxNumberBoxStorage+1),o=document.createElement("div");o.className="numbrBox",o.innerHTML=""+n,i.appendChild(o),e.numberBoxMap+=n}}),n.appendChild(i)},o=0;o<e.fieldSize;o++)i(o);a.appendChild(n)};for(n=0;n<this.fieldSize;n++)i(n);var o=this.store.createStore();a.appendChild(o),app.appendChild(a)}}]),e}();t.default=i},function(e,t,r){"use strict";var n=function(e){return e&&e.__esModule?e:{default:e}}(r(2));r(6);var a=void 0;function i(){a.grid.numberBoxMap===a.grid.store.numderBoxStore&&(a=void 0,field.style.opacity="0",player.style.opacity="0",textBoxCharacter.style.opacity="0",form.style.top="0",startGame.disabled=!1,setTimeout(function(){app.removeChild(field),app.removeChild(player),document.body.removeChild(textBoxCharacter)},500))}startGame.addEventListener("click",function(){(function(e){var t=!0,r=/^\d+$/;e.forEach(function(e){r.test(e)||(t=!1)}),e[0]<3?(alert("Размер поля должен быть не меньше 3x3"),t=!1):+e[1]>+e[0]*+e[0]?(alert("Количество складов не должно быть больше поля"),t=!1):t||alert("Введены некоректные значения");return t})([fieldSize.value.trim(),numberStorage.value.trim(),maxNumberBoxStorage.value.trim(),maxNumberBoxCharacter.value.trim()])&&(form.style.top="-355px",startGame.disabled=!0,a=new n.default(fieldSize.value.trim(),numberStorage.value.trim(),maxNumberBoxStorage.value.trim(),maxNumberBoxCharacter.value.trim(),i),fieldSize.value="",numberStorage.value="",maxNumberBoxStorage.value="",maxNumberBoxCharacter.value="",a.createObjects())}.bind(void 0)),document.addEventListener("keyup",function(e){if(void 0!==a&&(39===e.keyCode&&a.character.right(),37===e.keyCode&&a.character.left(),38===e.keyCode&&a.character.top(),40===e.keyCode&&a.character.bottom(),32===e.keyCode)){var t=document.getElementById(""+a.character.topPosition+a.character.leftPosition);""!==t.innerHTML&&0!=+t.childNodes[0].innerHTML&&a.character.numberBoxCharacter<a.character.maxNumberBoxCharacter&&"Склад"!==t.innerHTML?(t.childNodes[0].innerHTML-=1,a.character.newNumberBoxCharacter=a.character.numberBoxCharacter+1,a.changeTextBoxCharacter()):"Склад"===t.innerHTML&&a.character.numberBoxCharacter>0&&(a.character.newNumberBoxCharacter=a.character.numberBoxCharacter-1,a.grid.store.putStorage(1),a.changeTextBoxCharacter(),a.grid.numberBoxMap===a.grid.store.numderBoxStore&&i())}})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=l(r(3)),i=l(r(0)),o=l(r(5));function l(e){return e&&e.__esModule?e:{default:e}}var u=function(){function e(t,r,n,l,u){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.character=new a.default(l,t),this.grid=new i.default(t,r,n),this.TextBoxCharacter=void 0,this.dragAndDrop=new o.default(this.grid.store,u)}return n(e,[{key:"createObjects",value:function(){this.grid.createField(),this.character.createPlayer(),this.createTextBoxCharacter(),this.dragAndDrop.setDragAndDrope()}},{key:"createTextBoxCharacter",value:function(){var e=document.createElement("div");e.id="textBoxCharacter",e.className="textBoxCharacter",e.innerHTML="рюкзак: "+this.character.numberBoxCharacter+"/"+this.character.maxNumberBoxCharacter,this.TextBoxCharacter=e,document.body.appendChild(e)}},{key:"changeTextBoxCharacter",value:function(){this.TextBoxCharacter.innerHTML="рюкзак: "+this.character.numberBoxCharacter+"/"+this.character.maxNumberBoxCharacter}}]),e}();t.default=u},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();var a=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.leftPosition=0,this.topPosition=0,this.numberBoxCharacter=0,this.fieldSize=r,this.maxNumberBoxCharacter=t,this.player=void 0}return n(e,[{key:"createPlayer",value:function(){this.player=document.createElement("div"),this.player.className="player",this.player.id="player",this.player.style.top=document.getElementById("00").getBoundingClientRect().top+21+"px",this.player.style.left=document.getElementById("00").getBoundingClientRect().left+21+"px",app.appendChild(this.player)}},{key:"right",value:function(){if(this.leftPosition<this.fieldSize-1){var e=this.player.style.left;this.player.style.left=Number(e.slice(0,e.length-2))+53+"px",this.leftPosition+=1}}},{key:"left",value:function(){if(this.leftPosition>0&&this.topPosition<this.fieldSize){var e=this.player.style.left;this.player.style.left=Number(e.slice(0,e.length-2))-53+"px",this.leftPosition-=1}}},{key:"top",value:function(){if(this.topPosition>0){var e=this.player.style.top;this.player.style.top=Number(e.slice(0,e.length-2))-53+"px",this.topPosition-=1}}},{key:"bottom",value:function(){if(this.topPosition<this.fieldSize-1){var e=this.player.style.top;this.player.style.top=Number(e.slice(0,e.length-2))+53+"px",this.topPosition+=1}else if(this.topPosition<this.fieldSize&&this.leftPosition===this.fieldSize-1){var t=this.player.style.top;this.player.style.top=Number(t.slice(0,t.length-2))+53+"px",this.topPosition+=1}}},{key:"newNumberBoxCharacter",set:function(e){if(this.numberBoxCharacter<=this.maxNumberBoxCharacter)return this.numberBoxCharacter=e}}]),e}();t.default=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();!function(e){e&&e.__esModule}(r(0));var a=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.store=void 0,this.numderBoxStore=0,this.fieldSize=t}return n(e,[{key:"putStorage",value:function(e){this.numderBoxStore+=e,this.store.innerHTML="Ящиков: "+this.numderBoxStore}},{key:"createStore",value:function(){for(var e=document.createElement("tr"),t=0;t<this.fieldSize-1;t++){var r=document.createElement("td");t===this.fieldSize-3?(r.innerHTML="Ящиков: "+this.numderBoxStore,r.style.border="1px solid grey",r.setAttribute("colspan",2),this.store=r):t===this.fieldSize-2&&(r.innerHTML="Склад",r.style.border="1px solid grey",r.id=""+this.fieldSize+(this.fieldSize-1)),e.appendChild(r)}return e}}]),e}();t.default=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();var a=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.linkStore=t,this.linkEndGame=r}return n(e,[{key:"setDragAndDrope",value:function(){var e=field.querySelectorAll("td.black"),t=field.querySelectorAll("tr:last-child td:last-child");e.forEach(function(e){e.draggable="true",e.addEventListener("dragstart",function(e){e.dataTransfer.effectAllowed="copy",e.dataTransfer.setData("Text",this.id)})}),t[0].addEventListener("dragover",function(e){return e.preventDefault&&e.preventDefault(),e.dataTransfer.dropEffect="copy",!1}),t[0].addEventListener("drop",function(e){e.stopPropagation&&e.stopPropagation();var t=document.getElementById(e.dataTransfer.getData("Text"));this.linkStore.putStorage(+t.childNodes[0].innerHTML),t.childNodes[0].innerHTML="0",this.linkEndGame()}.bind(this))}}]),e}();t.default=a},function(e,t){}]);